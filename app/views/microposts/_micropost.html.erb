<li id="micropost-<%= micropost.id %>">
  <%
    # avoid querying the same user over and over on home page
    if params[:controller] == 'users'
      @micropost_user = micropost.user
    else
      @micropost_user = current_user
    end
  %>
  <%= link_to gravatar_for(@micropost_user, size: 50), @micropost_user %>
  <span class="user"><%= link_to(@micropost_user.name, @micropost_user) %></span>
  <span class="content"%>
    <%= micropost.content %>
    <%= image_tag micropost.picture if micropost.picture? %>
  </span>
  <span class="timestamp">Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    <% if current_user?(@micropost_user) %>
      <%= link_to "delete", micropost, method: :delete,
                            data: { confirm: "You sure?" } %>
    <% end %>
  </span>
</li>